(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c482c64"],{"21a6":function(e,t,o){(function(o){var a,n,r;(function(o,l){n=[],a=l,r="function"===typeof a?a.apply(t,n):a,void 0===r||(e.exports=r)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function a(e,t,o){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){c(a.response,t,o)},a.onerror=function(){console.error("could not download file")},a.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof o&&o.global===o?o:void 0,i=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,t,o){var i=l.URL||l.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?r(c):n(c.href)?a(e,t,o):r(c,c.target="_blank")):(c.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,l){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,l),o);else if(n(e))a(e,o,l);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){r(i)}))}}:function(e,t,o,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,o);var r="application/octet-stream"===e.type,c=/constructor/i.test(l.HTMLElement)||l.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&c||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var u=l.URL||l.webkitURL,m=u.createObjectURL(e);n?n.location=m:location.href=m,n=null,setTimeout((function(){u.revokeObjectURL(m)}),4e4)}});l.saveAs=c.saveAs=c,e.exports=c}))}).call(this,o("c8ba"))},"2a70":function(e,t,o){},"9a3e":function(e,t,o){"use strict";o("b3c7")},a434:function(e,t,o){"use strict";var a=o("23e7"),n=o("23cb"),r=o("a691"),l=o("50c4"),i=o("7b0b"),c=o("65f0"),s=o("8418"),d=o("1dde"),u=o("ae40"),m=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var o,a,d,u,m,f,w=i(this),y=l(w.length),R=n(e,y),g=arguments.length;if(0===g?o=a=0:1===g?(o=0,a=y-R):(o=g-2,a=b(p(r(t),0),y-R)),y+o-a>h)throw TypeError(v);for(d=c(w,a),u=0;u<a;u++)m=R+u,m in w&&s(d,u,w[m]);if(d.length=a,o<a){for(u=R;u<y-a;u++)m=u+a,f=u+o,m in w?w[f]=w[m]:delete w[f];for(u=y;u>y-a+o;u--)delete w[u-1]}else if(o>a)for(u=y-a;u>R;u--)m=u+a-1,f=u+o-1,m in w?w[f]=w[m]:delete w[f];for(u=0;u<o;u++)w[u+R]=arguments[u+2];return w.length=y-a+o,d}})},b3c7:function(e,t,o){},db53:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",[o("el-dialog",{staticClass:"sub_title",attrs:{title:"編輯",visible:e.dialogEditRecord},on:{"update:visible":function(t){e.dialogEditRecord=t}}},[o("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.formRecord,inline:!0,"label-position":"left","label-width":"70px"}},[o("el-row",[o("el-form-item",{attrs:{label:"姓名","label-width":"85px"}},[o("el-input",{model:{value:e.formRecord.name,callback:function(t){e.$set(e.formRecord,"name","string"===typeof t?t.trim():t)},expression:"formRecord.name"}})],1),o("el-form-item",{attrs:{label:"日期","label-width":"85px"}},[o("el-input",{model:{value:e.formRecord.date,callback:function(t){e.$set(e.formRecord,"date","string"===typeof t?t.trim():t)},expression:"formRecord.date"}})],1)],1),o("el-row",[o("el-form-item",{attrs:{label:"上班時間","label-width":"85px"}},[o("el-input",{model:{value:e.formRecord.entryTime,callback:function(t){e.$set(e.formRecord,"entryTime","string"===typeof t?t.trim():t)},expression:"formRecord.entryTime"}})],1),o("el-form-item",{attrs:{label:"上班鎖定","label-width":"85px"}},[o("el-select",{staticStyle:{width:"250px"},model:{value:e.formRecord.entryTimeDisable,callback:function(t){e.$set(e.formRecord,"entryTimeDisable",t)},expression:"formRecord.entryTimeDisable"}},[o("el-option",{attrs:{label:"否",value:!1}}),o("el-option",{attrs:{label:"是",value:!0}})],1)],1)],1),o("el-row",[o("el-form-item",{attrs:{label:"下班時間","label-width":"85px"}},[o("el-input",{model:{value:e.formRecord.quitTime,callback:function(t){e.$set(e.formRecord,"quitTime","string"===typeof t?t.trim():t)},expression:"formRecord.quitTime"}})],1),o("el-form-item",{attrs:{label:"下班鎖定","label-width":"85px"}},[o("el-select",{staticStyle:{width:"250px"},model:{value:e.formRecord.quitTimeDisable,callback:function(t){e.$set(e.formRecord,"quitTimeDisable",t)},expression:"formRecord.quitTimeDisable"}},[o("el-option",{attrs:{label:"否",value:!1}}),o("el-option",{attrs:{label:"是",value:!0}})],1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogEditRecord=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitRecord()}}},[e._v("送 出")])],1)],1),o("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"請選擇"},model:{value:e.nameSearch,callback:function(t){e.nameSearch=t},expression:"nameSearch"}},e._l(e.nameOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),o("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"month","value-format":"yyyy-MM",placeholder:"選擇日期"},model:{value:e.monthSearch,callback:function(t){e.monthSearch=t},expression:"monthSearch"}}),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchRecord()}}},[e._v("搜尋")]),o("el-row"),o("div",{staticClass:"el-col-24"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.itemData,"default-sort":{prop:"date",order:"ascending"},"row-class-name":e.tableRowClassName,"empty-text":"沒有資料"}},[o("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),o("el-table-column",{attrs:{prop:"date",label:"日期",width:"140%",sortable:"","sort-method":function(e,t){return e.date-t.date}}}),o("el-table-column",{attrs:{prop:"week",label:"星期",width:"140%",sortable:"","sort-method":function(e,t){return e.date-t.date}}}),o("el-table-column",{attrs:{prop:"name",label:"姓名",sortable:"","sort-method":function(e,t){return e.name.localeCompare(t.name)}}}),o("el-table-column",{attrs:{prop:"entryTime",label:"上班時間",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"entryDevice.type",label:"設備",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"entryDevice.brand",label:"裝置",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"entryDevice.model",label:"型號",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"quitTime",label:"下班時間",width:"140%",sortable:"","sort-method":function(e,t){return e.quitTime-t.quitTime}}}),o("el-table-column",{attrs:{prop:"quitDevice.type",label:"設備",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"quitDevice.brand",label:"裝置",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"quitDevice.model",label:"型號",width:"140%",sortable:"","sort-method":function(e,t){return e.entryTime-t.entryTime}}}),o("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.editRecord(t.row)}}},[e._v("編輯")])]}}])})],1)],1)],1)],1)},n=[],r=o("5530"),l=o("ade3"),i=(o("d3b7"),o("159b"),o("b0c0"),o("a434"),o("17e1")),c=(o("2a70"),o("c1df")),s=(o("21a6"),{components:{},data:function(){var e;return e={listLoading:!1,itemData:[],month:"",people:"",collection:"cs",dialogEditRecord:!1},Object(l["a"])(e,"itemData",[]),Object(l["a"])(e,"formBasic",[]),Object(l["a"])(e,"formRecord",{}),Object(l["a"])(e,"nameOptions",[]),Object(l["a"])(e,"nameSearch",""),Object(l["a"])(e,"monthSearch",c(new Date).format("YYYY-MM")),Object(l["a"])(e,"number",""),e},created:function(){},methods:{editRecord:function(e){var t=this;this.dialogEditRecord=!0;var o=i["a"].collection("human-resources").doc(this.number).collection("record").doc(e.date);o.onSnapshot((function(e){t.formRecord=e.data()}))},submitRecord:function(){var e=this,t=i["a"].collection("human-resources").doc(this.number).collection("record").doc(this.formRecord.date);t.set(this.formRecord).then((function(){console.log("set data successful"),e.$message.success("修改成功"),e.$router.push({path:"/human/record"}),e.dialogEditRecord=!1}))},searchRecord:function(){var e=this;this.formBasic.forEach((function(t,o){t.name==e.nameSearch&&(e.number=t.number)}));var t=i["a"].collection("human-resources").doc(this.number).collection("record");t.where("month","==",this.monthSearch).onSnapshot((function(t){e.itemData.splice(0,e.itemData.length),t.forEach((function(t){e.itemData.push(Object(r["a"])(Object(r["a"])({},t.data()),{},{week:c(t.data().date).locale("zh-TW").format("dddd")}))}))}))},readName:function(){var e=this,t=i["a"].collection("human-resources");t.get().then((function(t){t.forEach((function(t){e.formBasic.push(t.data()),e.nameOptions.push({value:t.data().name,label:t.data().name})}))}))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"color-row":""}},mounted:function(){this.readName()}}),d=s,u=(o("9a3e"),o("2877")),m=Object(u["a"])(d,a,n,!1,null,null,null);t["default"]=m.exports}}]);