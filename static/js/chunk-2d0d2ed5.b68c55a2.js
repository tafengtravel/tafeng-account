(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d2ed5"],{"5b1c":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"報帳日期","value-format":"yyyy-MM-dd"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜尋")]),a("el-row"),a("div",{staticClass:"el-col-24"},[a("div",{staticClass:"sub_title"},[t._v("當日業績")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.itemData,"default-sort":{prop:"number",order:"ascending"},"row-class-name":t.tableRowClassName,"empty-text":"沒有資料"}},[a("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),a("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(t,e){return t.number.localeCompare(e.number)}}}),a("el-table-column",{attrs:{prop:"group",label:"團體",width:"90%",formatter:t.group,sortable:"","sort-method":function(t,e){return t.group-e.group}}}),a("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),a("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(t,e){return t.depDate.localeCompare(e.depDate)}}}),a("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(t,e){return t.endDate.localeCompare(e.endDate)}}}),a("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(t,e){return t.name.localeCompare(e.name)}}}),a("el-table-column",{attrs:{prop:"people",label:"代表人",width:"175%",sortable:"","sort-method":function(t,e){return t.people.localeCompare(e.people)}}}),a("el-table-column",{attrs:{prop:"amount",label:"人數",width:"90%",sortable:"","sort-method":function(t,e){return t.amount.localeCompare(e.amount)}}}),a("el-table-column",{attrs:{prop:"createDate",label:"報帳日期",width:"120%"}}),a("el-table-column",{attrs:{prop:"priceDetailAdminCheck",label:"主管核實",width:"100%",formatter:t.adminCheck}}),a("el-table-column",{attrs:{prop:"incomeDetailIncome[0]",label:"收入",width:"100%"}}),a("el-table-column",{attrs:{prop:"incomeDetailOpCheck[0]",label:"OP核實",width:"100%",formatter:t.opCheck}}),a("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("編輯")])]}}])})],1),a("el-row"),a("div",{staticStyle:{"text-align":"right"}},[a("GenerateFolderCover",{attrs:{fotherItemData:t.itemData}})],1),a("el-row"),a("div",{staticClass:"sub_title"},[t._v("退業績")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.itemDataCancel,"default-sort":{prop:"number",order:"ascending"},"row-class-name":t.tableRowClassName,"empty-text":"沒有資料"}},[a("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),a("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(t,e){return t.number.localeCompare(e.number)}}}),a("el-table-column",{attrs:{prop:"group",label:"團體",width:"90%",formatter:t.group,sortable:"","sort-method":function(t,e){return t.group-e.group}}}),a("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),a("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(t,e){return t.depDate.localeCompare(e.depDate)}}}),a("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(t,e){return t.endDate.localeCompare(e.endDate)}}}),a("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(t,e){return t.name.localeCompare(e.name)}}}),a("el-table-column",{attrs:{prop:"people",label:"代表人",width:"175%",sortable:"","sort-method":function(t,e){return t.people.localeCompare(e.people)}}}),a("el-table-column",{attrs:{prop:"amount",label:"人數",width:"90%",sortable:"","sort-method":function(t,e){return t.amount.localeCompare(e.amount)}}}),a("el-table-column",{attrs:{prop:"other",label:"備註",width:"200%"}}),a("el-table-column",{attrs:{prop:"createDate",label:"報帳日期",width:"120%"}}),a("el-table-column",{attrs:{prop:"priceDetailAdminCheck",label:"主管核實",width:"100%",formatter:t.adminCheck}}),a("el-table-column",{attrs:{prop:"incomeDetailIncome[0]",label:"收入",width:"100%"}}),a("el-table-column",{attrs:{prop:"incomeDetailOpCheck[0]",label:"OP核實",width:"100%",formatter:t.opCheck}}),a("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("編輯")])]}}])})],1)],1)],1)},o=[],r=a("5530"),n=(a("a434"),a("d3b7"),a("159b"),a("17e1")),i=(a("2a70"),a("c1df")),c=(a("ed08"),a("a3bf")),s={components:{GenerateFolderCover:c["a"]},data:function(){return{listLoading:!1,itemData:[],itemDataCancel:[],date:""}},created:function(){},methods:{adminCheck:function(t,e){return t.priceDetailAdminCheck?"✔️":"❌"},opCheck:function(t,e){return t.incomeDetailOpCheck[0]?"✔️":"❌"},group:function(t,e){return t.tax>0&&"團體報帳"!=t.location&&"JOIN報帳"!=t.location&&"跨年"!=t.location?"✔️":""},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===1?"color-row":""},search:function(){var t=this;this.listLoading=!0;var e,a=0,l=i(this.date).subtract(12,"months").format("YYYY-MM");this.itemData.splice(0,this.itemData.length),this.itemDataCancel.splice(0,this.itemDataCancel.length);for(var o=0;o<24;o++)e=n["a"].collection(l),console.log(l),e.where("createDate","==",this.date).get().then((function(e){e.forEach((function(e){a=parseInt(e.data().price)-parseInt(e.data().income),t.itemData.push(Object(r["a"])(Object(r["a"])({},e.data()),{},{priceInsufficient:a}))}))})),e.where("cancelDate","==",this.date).get().then((function(e){e.forEach((function(e){a=parseInt(e.data().price)-parseInt(e.data().income),t.itemDataCancel.push(Object(r["a"])(Object(r["a"])({},e.data()),{},{priceInsufficient:a}))}))})),l=i(l).add(1,"months").format("YYYY-MM");this.listLoading=!1},edit:function(t){console.log(t);var e=this.$router.resolve({path:"/op/edit",query:{number:t.number,depDate:i(t.depDate).format("YYYY-MM-DD")}});window.open(e.href,"_blank")}},mounted:function(){}},p=s,u=a("2877"),d=Object(u["a"])(p,l,o,!1,null,null,null);e["default"]=d.exports}}]);