(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74325166"],{"2a70":function(e,t,o){},3932:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-date-picker",{attrs:{type:"monthrange","range-separator":"至","start-placeholder":"開始月份","end-placeholder":"結束月份","value-format":"yyyy-MM"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}}),o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"請輸入代表人"},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}}),o("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜尋")]),o("div",{staticClass:"el-col-24"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.itemData,"default-sort":{prop:"number",order:"ascending"},"row-class-name":e.tableRowClassName,"empty-text":"沒有資料"}},[o("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),o("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(e,t){return e.number.localeCompare(t.number)}}}),o("el-table-column",{attrs:{prop:"group",label:"團體",width:"90%",formatter:e.group,sortable:"","sort-method":function(e,t){return e.group-t.group}}}),o("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),o("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(e,t){return e.depDate.localeCompare(t.depDate)}}}),o("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(e,t){return e.endDate.localeCompare(t.endDate)}}}),o("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(e,t){return e.name.localeCompare(t.name)}}}),o("el-table-column",{attrs:{prop:"people",label:"代表人",width:"175%",sortable:"","sort-method":function(e,t){return e.people.localeCompare(t.people)}}}),o("el-table-column",{attrs:{prop:"amount",label:"人數",width:"90%",sortable:"","sort-method":function(e,t){return e.amount.localeCompare(t.amount)}}}),o("el-table-column",{attrs:{prop:"phone",label:"聯絡電話",width:"125%",sortable:"","sort-method":function(e,t){return e.phone-t.phone}}}),o("el-table-column",{attrs:{prop:"priceInsufficient",label:"未收尾款",width:"125%",sortable:"","sort-method":function(e,t){return e.priceInsufficient-t.priceInsufficient}}}),o("el-table-column",{attrs:{prop:"insurance1",label:"旅責險",width:"100%",formatter:e.insurance,sortable:"","sort-method":function(e,t){return e.insurance1-t.insurance1}}}),o("el-table-column",{attrs:{prop:"other",label:"備註",sortable:"","sort-method":function(e,t){return e.other.localeCompare(t.other)}}}),o("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.edit(t.row)}}},[e._v("編輯")])]}}])})],1)],1)],1)},n=[],r=o("5530"),l=(o("a434"),o("d3b7"),o("159b"),o("17e1")),i=(o("2a70"),o("c1df")),c={components:{},data:function(){return{listLoading:!1,itemData:[],month:"",people:""}},created:function(){},methods:{insurance:function(e,t){return e.insurance1?"✔️":"❌"},group:function(e,t){return e.tax>0?"✔️":""},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"color-row":""},search:function(){var e=this;this.itemData.splice(0,this.itemData.length);var t,o=i(this.month[0]),a=i(this.month[1]),n=a.diff(o,"month")+1,c=0;o=this.month[0];for(var s=0;s<n;s++)console.log(o),t=l["a"].collection(o),t.where("people","==",this.people).get().then((function(t){t.forEach((function(t){c=parseInt(t.data().price)-parseInt(t.data().income),e.itemData.push(Object(r["a"])(Object(r["a"])({},t.data()),{},{priceInsufficient:c}))}))})),o=i(o).add(1,"months").format("YYYY-MM");this.listLoading=!1},edit:function(e){console.log(e);var t=this.$router.resolve({path:"/cs/edit",query:{number:e.number,depDate:i(e.depDate).format("YYYY-MM")}});window.open(t.href,"_blank")}},mounted:function(){}},s=c,u=(o("5308"),o("2877")),p=Object(u["a"])(s,a,n,!1,null,null,null);t["default"]=p.exports},5308:function(e,t,o){"use strict";o("9fc7")},"9fc7":function(e,t,o){},a434:function(e,t,o){"use strict";var a=o("23e7"),n=o("23cb"),r=o("a691"),l=o("50c4"),i=o("7b0b"),c=o("65f0"),s=o("8418"),u=o("1dde"),p=o("ae40"),d=u("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,b=9007199254740991,w="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var o,a,u,p,d,m,g=i(this),v=l(g.length),y=n(e,v),x=arguments.length;if(0===x?o=a=0:1===x?(o=0,a=v-y):(o=x-2,a=f(h(r(t),0),v-y)),v+o-a>b)throw TypeError(w);for(u=c(g,a),p=0;p<a;p++)d=y+p,d in g&&s(u,p,g[d]);if(u.length=a,o<a){for(p=y;p<v-a;p++)d=p+a,m=p+o,d in g?g[m]=g[d]:delete g[m];for(p=v;p>v-a+o;p--)delete g[p-1]}else if(o>a)for(p=v-a;p>y;p--)d=p+a-1,m=p+o-1,d in g?g[m]=g[d]:delete g[m];for(p=0;p<o;p++)g[p+y]=arguments[p+2];return g.length=v-a+o,u}})}}]);