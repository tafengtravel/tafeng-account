(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7985d67c"],{"25f0":function(t,a,e){"use strict";var o=e("6eeb"),l=e("825a"),r=e("d039"),n=e("ad6d"),i="toString",s=RegExp.prototype,c=s[i],p=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=i;(p||u)&&o(RegExp.prototype,i,(function(){var t=l(this),a=String(t.source),e=t.flags,o=String(void 0===e&&t instanceof RegExp&&!("flags"in s)?n.call(t):e);return"/"+a+"/"+o}),{unsafe:!0})},"2a70":function(t,a,e){},a434:function(t,a,e){"use strict";var o=e("23e7"),l=e("23cb"),r=e("a691"),n=e("50c4"),i=e("7b0b"),s=e("65f0"),c=e("8418"),p=e("1dde"),u=e("ae40"),d=p("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,b=9007199254740991,w="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,a){var e,o,p,u,d,m,g=i(this),T=n(g.length),x=l(t,T),C=arguments.length;if(0===C?e=o=0:1===C?(e=0,o=T-x):(e=C-2,o=h(f(r(a),0),T-x)),T+e-o>b)throw TypeError(w);for(p=s(g,o),u=0;u<o;u++)d=x+u,d in g&&c(p,u,g[d]);if(p.length=o,e<o){for(u=x;u<T-o;u++)d=u+o,m=u+e,d in g?g[m]=g[d]:delete g[m];for(u=T;u>T-o+e;u--)delete g[u-1]}else if(e>o)for(u=T-o;u>x;u--)d=u+o-1,m=u+e-1,d in g?g[m]=g[d]:delete g[m];for(u=0;u<e;u++)g[u+x]=arguments[u+2];return g.length=T-o+e,p}})},cada:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("TableOption",{ref:"child",on:{searchChildEvent:t.search}}),e("el-row"),e("el-row",[e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("人數："+t._s(t.amountTotal))])],1),e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("營業額："+t._s(t.priceTotal))])],1),e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("利潤："+t._s(t.profitTotal))])],1),e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("稅金："+t._s(t.taxTotal))])],1)]),e("div",{staticClass:"el-col-24"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"show-summary":"","summary-method":t.getSummaries,data:t.itemData.filter((function(a){return!t.$refs.child.name||a.name.toLowerCase().includes(t.$refs.child.name.toLowerCase())})),"default-sort":{prop:"number",order:"ascending"},"row-class-name":t.tableRowClassName,"empty-text":"沒有資料"}},[e("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),e("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(t,a){return t.number.localeCompare(a.number)}}}),e("el-table-column",{attrs:{prop:"group",label:"團體",width:"90%",formatter:t.group,sortable:"","sort-method":function(t,a){return t.group-a.group}}}),e("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),e("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(t,a){return t.depDate.localeCompare(a.depDate)}}}),e("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(t,a){return t.endDate.localeCompare(a.endDate)}}}),e("el-table-column",{attrs:{prop:"name",label:"團名",width:"180%",sortable:"","sort-method":function(t,a){return t.name.localeCompare(a.name)}}}),e("el-table-column",{attrs:{prop:"people",label:"代表人",width:"120%",sortable:"","sort-method":function(t,a){return t.people.localeCompare(a.people)}}}),e("el-table-column",{attrs:{prop:"amount",label:"人數",width:"90%",sortable:"","sort-method":function(t,a){return t.amount.localeCompare(a.amount)}}}),e("el-table-column",{attrs:{prop:"phone",label:"聯絡電話",width:"125%",sortable:"","sort-method":function(t,a){return t.phone-a.phone}}}),e("el-table-column",{attrs:{prop:"priceInsufficient",label:"未收尾款",width:"125%",sortable:"","sort-method":function(t,a){return t.priceInsufficient-a.priceInsufficient}}}),e("el-table-column",{attrs:{prop:"profit",label:"利潤",width:"100%",formatter:t.profit,sortable:"","sort-method":function(t,a){return t.profit-a.profit}}}),e("el-table-column",{attrs:{prop:"insurance1",label:"旅責",width:"80%",formatter:t.insuranceCheck,sortable:"","sort-method":function(t,a){return t.insurance1-a.insurance1}}}),e("el-table-column",{attrs:{prop:"insuranceComplete1",label:"已保",width:"80%",formatter:t.insuranceCheck,sortable:"","sort-method":function(t,a){return t.insuranceComplete1-a.insuranceComplete1}}}),e("el-table-column",{attrs:{prop:"insurance2",label:"旅平",width:"80%",formatter:t.insuranceCheck,sortable:"","sort-method":function(t,a){return t.insurance2-a.insurance2}}}),e("el-table-column",{attrs:{prop:"insuranceComplete2",label:"已保",width:"80%",formatter:t.insuranceCheck,sortable:"","sort-method":function(t,a){return t.insuranceComplete2-a.insuranceComplete2}}}),e("el-table-column",{attrs:{prop:"other",label:"備註",width:"120%",sortable:"","sort-method":function(t,a){return t.other.localeCompare(a.other)}}}),e("el-table-column",{attrs:{prop:"location",label:"地點",width:"100%",sortable:"","sort-method":function(t,a){return t.location.localeCompare(a.location)}}}),e("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.edit(a.row)}}},[t._v("編輯")])]}}])})],1)],1)],1)},l=[],r=e("5530"),n=(e("d3b7"),e("159b"),e("d81d"),e("25f0"),e("a434"),e("17e1")),i=(e("2a70"),e("c1df"),e("5a943")),s={components:{TableOption:i["a"]},data:function(){return{listLoading:!1,itemData:[],month:"",amountTotal:"",profitTotal:"",priceTotal:"",taxTotal:""}},created:function(){},methods:{getSummaries:function(t){var a=t.columns,e=t.data,o=[];return a.forEach((function(t,a){if(0!==a)if("人數"==t.label||"利潤"==t.label){var l=e.map((function(a){return parseInt(a[t.property])}));l.every((function(t){return isNaN(t)}))||(o[a]=l.reduce((function(t,a){var e=parseInt(a);return isNaN(e)?t:t+a}),0))}else o[a]="";else o[a]="總共"})),o},insuranceCheck:function(t,a,e,o){return t[a.property]?"✔️":"❌"},profit:function(t,a){return"團體報帳"==t.location||"JOIN報帳"==t.location||"跨年"==t.location?t.profit=0:t.profit},group:function(t,a){return t.tax>0&&"團體報帳"!=t.location&&"JOIN報帳"!=t.location&&"跨年"!=t.location?"✔️":""},tableRowClassName:function(t){t.row;var a=t.rowIndex;return a%2===1?"color-row":""},search:function(t){var a=this;this.listLoading=!0;var e=n["a"].collection(t.month.toString()),o=0;"all"==t.cs?e.onSnapshot((function(t){a.itemData.splice(0,a.itemData.length),a.amountTotal=0,a.profitTotal=0,a.priceTotal=0,a.taxTotal=0,t.forEach((function(t){o=parseInt(t.data().price)-parseInt(t.data().income),a.itemData.push(Object(r["a"])(Object(r["a"])({},t.data()),{},{priceInsufficient:o})),isNaN(parseFloat(t.data().amount))||(a.amountTotal=parseFloat(a.amountTotal)+parseFloat(t.data().amount)),isNaN(parseFloat(t.data().price))||(a.priceTotal=parseFloat(a.priceTotal)+parseFloat(t.data().price)),"跨年"!=t.data().location&&"團體報帳"!=t.data().location&&"JOIN報帳"!=t.data().location&&(isNaN(parseFloat(t.data().profit))||(a.profitTotal=parseFloat(a.profitTotal)+parseFloat(t.data().profit)),isNaN(parseFloat(t.data().tax))||(a.taxTotal=parseFloat(a.taxTotal)+parseFloat(t.data().tax)))})),a.listLoading=!1})):e.where("cs","==",t.cs).onSnapshot((function(t){a.itemData.splice(0,a.itemData.length),a.amountTotal=0,a.profitTotal=0,a.priceTotal=0,a.taxTotal=0,t.forEach((function(t){o=parseInt(t.data().price)-parseInt(t.data().income),a.itemData.push(Object(r["a"])(Object(r["a"])({},t.data()),{},{priceInsufficient:o})),isNaN(parseFloat(t.data().amount))||(a.amountTotal=parseFloat(a.amountTotal)+parseFloat(t.data().amount)),isNaN(parseFloat(t.data().price))||(a.priceTotal=parseFloat(a.priceTotal)+parseFloat(t.data().price)),"跨年"!=t.data().location&&"團體報帳"!=t.data().location&&"JOIN報帳"!=t.data().location&&(isNaN(parseFloat(t.data().profit))||(a.profitTotal=parseFloat(a.profitTotal)+parseFloat(t.data().profit)),isNaN(parseFloat(t.data().tax))||(a.taxTotal=parseFloat(a.taxTotal)+parseFloat(t.data().tax)))})),a.listLoading=!1}))},edit:function(t){console.log(t);var a=this.$router.resolve({path:"/admin/edit/fit",query:{number:t.number,depDate:this.$refs.child.month}});window.open(a.href,"_blank")}},mounted:function(){}},c=s,p=e("2877"),u=Object(p["a"])(c,o,l,!1,null,null,null);a["default"]=u.exports}}]);