(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-579016d0"],{1148:function(e,r,t){"use strict";var o=t("a691"),n=t("1d80");e.exports="".repeat||function(e){var r=String(n(this)),t="",i=o(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))1&i&&(t+=r);return t}},"25f0":function(e,r,t){"use strict";var o=t("6eeb"),n=t("825a"),i=t("d039"),c=t("ad6d"),s="toString",l=RegExp.prototype,u=l[s],a=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=s;(a||f)&&o(RegExp.prototype,s,(function(){var e=n(this),r=String(e.source),t=e.flags,o=String(void 0===t&&e instanceof RegExp&&!("flags"in l)?c.call(e):t);return"/"+r+"/"+o}),{unsafe:!0})},"2a70":function(e,r,t){},"408a":function(e,r,t){var o=t("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=o(e))throw TypeError("Incorrect invocation");return+e}},"47e2":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container",staticStyle:{"background-color":"#fbf2e6"}},[t("Input",{ref:"child",on:{readChildEvent:e.readParentEvent}})],1)},n=[],i=t("1da1"),c=(t("96cf"),t("d3b7"),t("159b"),t("4e82"),t("25f0"),t("17e1")),s=(t("2a70"),t("c1df")),l=t("1270"),u={name:"new",components:{Input:l["a"]},data:function(){return{}},methods:{readParentEvent:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var t,o,n,i,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(null!=e.$refs.child.ruleForm.cs&&null!=e.$refs.child.ruleForm.depDate&&null!=e.$refs.child.ruleForm.people){r.next=3;break}return e.$message.error("請輸入客服、出發日期、代表人"),r.abrupt("return",0);case 3:return t=c["a"].collection(s(e.$refs.child.ruleForm.depDate).format("YYYY-MM")),o=[],n=0,r.next=8,t.where("cs","==",e.$refs.child.ruleForm.cs).get().then((function(e){e.forEach((function(e){o[n]=e.id,console.log(o[n]),n+=1}))}));case 8:return o.sort(),console.log(o),i=o[o.length-1],console.log(i),void 0===i?(console.log("尚未建立"),l=e.$refs.child.ruleForm.cs,i=parseInt(e.$refs.child.ruleForm.depDate.substring(0,4)),i-=1911,"B10"==e.$refs.child.ruleForm.cs||"B11"==e.$refs.child.ruleForm.cs||"B12"==e.$refs.child.ruleForm.cs?e.$refs.child.ruleForm.number=e.$refs.child.ruleForm.cs+i.toString()+e.$refs.child.ruleForm.depDate.substring(5,7)+"001":e.$refs.child.ruleForm.number=l.substring(0,1)+"0"+l.substring(1,2)+i.toString()+e.$refs.child.ruleForm.depDate.substring(5,7)+"001"):(u=i,i=i.substring(3,11),i=parseInt(i),i+=1,i=i.toString(),console.log(i),console.log(u.substring(0,1)),console.log(u.substring(2,3)),"B10"==e.$refs.child.ruleForm.cs||"B11"==e.$refs.child.ruleForm.cs||"B12"==e.$refs.child.ruleForm.cs?e.$refs.child.ruleForm.number=e.$refs.child.ruleForm.cs+i:e.$refs.child.ruleForm.number=u.substring(0,1)+"0"+u.substring(2,3)+i),t=c["a"].collection(s(e.$refs.child.ruleForm.depDate).format("YYYY-MM")).doc(e.$refs.child.ruleForm.number),r.next=16,t.get().then((function(e){"undefined"!=typeof e.data()&&e.exists&&(alert("錯誤 此團號已存在 請聯繫管理員"),window.location.reload(""))}));case 16:e.$refs.child.submitShow=!0,e.$refs.child.$forceUpdate(),e.regularCustomerCheck();case 19:case"end":return r.stop()}}),r)})))()},regularCustomerCheck:function(){var e,r=this,t=s(s(this.$refs.child.ruleForm.depDate).format("YYYY-MM")),o=s(t).subtract(120,"months").format("YYYY-MM"),n=t.diff(o,"month")+1;this.$refs.child.ruleForm.regularCustomer=!1,this.$refs.child.$forceUpdate();for(var i=0;i<n;i++)console.log(o),e=c["a"].collection(o),e.where("people","==",this.$refs.child.ruleForm.people).get().then((function(e){e.forEach((function(e){r.$refs.child.ruleForm.regularCustomer=!0,console.log(e.data().people),r.$refs.child.$forceUpdate()}))})),o=s(o).add(1,"months").format("YYYY-MM")}},computed:{},mounted:function(){this.$refs.child.adminShow=!1,this.$refs.child.opShow=!1,this.$refs.child.readNumber=!0,this.$refs.child.submitNew=!0}},a=u,f=(t("86cf"),t("2877")),d=Object(f["a"])(a,o,n,!1,null,"00fe0022",null);r["default"]=d.exports},"4e82":function(e,r,t){"use strict";var o=t("23e7"),n=t("1c0b"),i=t("7b0b"),c=t("d039"),s=t("a640"),l=[],u=l.sort,a=c((function(){l.sort(void 0)})),f=c((function(){l.sort(null)})),d=s("sort"),h=a||!f||!d;o({target:"Array",proto:!0,forced:h},{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),n(e))}})},"86cf":function(e,r,t){"use strict";t("f147")},b680:function(e,r,t){"use strict";var o=t("23e7"),n=t("a691"),i=t("408a"),c=t("1148"),s=t("d039"),l=1..toFixed,u=Math.floor,a=function(e,r,t){return 0===r?t:r%2===1?a(e,r-1,t*e):a(e*e,r/2,t)},f=function(e){var r=0,t=e;while(t>=4096)r+=12,t/=4096;while(t>=2)r+=1,t/=2;return r},d=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));o({target:"Number",proto:!0,forced:d},{toFixed:function(e){var r,t,o,s,l=i(this),d=n(e),h=[0,0,0,0,0,0],m="",g="0",p=function(e,r){var t=-1,o=r;while(++t<6)o+=e*h[t],h[t]=o%1e7,o=u(o/1e7)},b=function(e){var r=6,t=0;while(--r>=0)t+=h[r],h[r]=u(t/e),t=t%e*1e7},$=function(){var e=6,r="";while(--e>=0)if(""!==r||0===e||0!==h[e]){var t=String(h[e]);r=""===r?t:r+c.call("0",7-t.length)+t}return r};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(r=f(l*a(2,69,1))-69,t=r<0?l*a(2,-r,1):l/a(2,r,1),t*=4503599627370496,r=52-r,r>0){p(0,t),o=d;while(o>=7)p(1e7,0),o-=7;p(a(10,o,1),0),o=r-1;while(o>=23)b(1<<23),o-=23;b(1<<o),p(1,1),b(2),g=$()}else p(0,t),p(1<<-r,0),g=$()+c.call("0",d);return d>0?(s=g.length,g=m+(s<=d?"0."+c.call("0",d-s)+g:g.slice(0,s-d)+"."+g.slice(s-d))):g=m+g,g}})},f147:function(e,r,t){}}]);