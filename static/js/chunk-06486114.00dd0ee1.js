(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06486114"],{"2a70":function(a,t,e){},"8d50":function(a,t,e){"use strict";var l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"app-container"},[e("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"選擇DL日期","value-format":"yyyy-MM-dd"},model:{value:a.date,callback:function(t){a.date=t},expression:"date"}}),e("el-button",{attrs:{type:"primary"},on:{click:a.search}},[a._v("搜尋")]),e("el-row"),e("div",{staticClass:"el-col-24"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:a.itemData,"default-sort":{prop:"payCompany",order:"ascending"},"row-class-name":a.tableRowClassName,"empty-text":"沒有資料"}},[e("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),e("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(a,t){return a.number-t.number}}}),e("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),e("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(a,t){return a.depDate.localeCompare(t.depDate)}}}),e("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(a,t){return a.endDate.localeCompare(t.endDate)}}}),e("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(a,t){return a.name.localeCompare(t.name)}}}),e("el-table-column",{attrs:{prop:"company",label:"公司名稱",width:"120%",sortable:"","sort-method":function(a,t){return a.company.localeCompare(t.company)}}}),e("el-table-column",{attrs:{prop:"people",label:"代表人",width:"120%",sortable:"","sort-method":function(a,t){return a.people.localeCompare(t.people)}}}),e("el-table-column",{attrs:{prop:"payCompany",label:"廠商",sortable:"","sort-method":function(a,t){return a.payCompany.localeCompare(t.payCompany)}}}),e("el-table-column",{attrs:{prop:"item",label:"品項",sortable:"","sort-method":function(a,t){return a.phone-t.phone}}}),e("el-table-column",{attrs:{prop:"pay",label:"支出",width:"80%"}}),e("el-table-column",{attrs:{prop:"dl1",label:"第一筆DL",width:"120%"}}),e("el-table-column",{attrs:{prop:"dlPay1",label:"第一筆金額",width:"120%"}}),e("el-table-column",{attrs:{prop:"dlPayType1",label:"付款方式",width:"120%"}}),e("el-table-column",{attrs:{prop:"dlPayDate1",label:"付款日期",width:"120%"}}),e("el-table-column",{attrs:{prop:"dl2",label:"第二筆DL",width:"120%"}}),e("el-table-column",{attrs:{prop:"dlPay2",label:"第二筆金額",width:"120%"}}),e("el-table-column",{attrs:{prop:"dlPayType2",label:"付款方式",width:"120%"}}),e("el-table-column",{attrs:{prop:"dlPayDate2",label:"付款日期",width:"120%"}}),e("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return a.edit(t.row)}}},[a._v("編輯")])]}}])})],1),e("el-row")],1),e("div",{staticStyle:{"text-align":"right"}},[e("GenerateBill",{attrs:{fotherItemData:a.itemData,fotherDate:a.date}})],1)],1)},o=[],n=e("5530"),r=(e("a434"),e("d3b7"),e("159b"),e("17e1")),i=(e("2a70"),e("c1df")),d=(e("ed08"),e("67a1")),p={components:{GenerateBill:d["a"]},data:function(){return{listLoading:!1,itemData:[],itemDataCancel:[],date:""}},created:function(){},methods:{tableRowClassName:function(a){a.row;var t=a.rowIndex;return t%2===1?"color-row":""},search:function(){var a=this;this.listLoading=!0;var t,e=i(this.date).subtract(12,"months").format("YYYY-MM");this.itemData.splice(0,this.itemData.length);for(var l=0;l<24;l++)t=r["a"].collection(e+"G"),console.log(e),t.where("payDetailDl1","array-contains",this.date).onSnapshot((function(t){t.forEach((function(t){for(var e=0;e<t.data().payDetailDl1.length;e++)t.data().payDetailDl1[e]==a.date&&a.itemData.push(Object(n["a"])(Object(n["a"])({},t.data()),{},{payCompany:t.data().payDetailCompany[e],item:t.data().payDetailItem[e],pay:t.data().payDetailPay[e],dl1:t.data().payDetailDl1[e],dlPay1:t.data().payDetailDlPay1[e],dlPayType1:t.data().payDetailDlType1[e],dlPayDate1:t.data().payDetailDlPayDate1[e],dl2:t.data().payDetailDl2[e],dlPay2:t.data().payDetailDlPay2[e],dlPayType2:t.data().payDetailDlType2[e],dlPayDate2:t.data().payDetailDlPayDate2[e],detail:t.data().payDetailDetail[e]}))}))})),t.where("payDetailDl2","array-contains",this.date).get().then((function(t){t.forEach((function(t){for(var e=0;e<t.data().payDetailDl2.length;e++)t.data().payDetailDl2[e]==a.date&&a.itemData.push(Object(n["a"])(Object(n["a"])({},t.data()),{},{payCompany:t.data().payDetailCompany[e],item:t.data().payDetailItem[e],pay:t.data().payDetailPay[e],dl1:t.data().payDetailDl1[e],dlPay1:t.data().payDetailDlPay1[e],dlPayType1:t.data().payDetailDlType1[e],dlPayDate1:t.data().payDetailDlPayDate1[e],dl2:t.data().payDetailDl2[e],dlPay2:t.data().payDetailDlPay2[e],dlPayType2:t.data().payDetailDlType2[e],dlPayDate2:t.data().payDetailDlPayDate2[e],detail:t.data().payDetailDetail[e]}))}))})),e=i(e).add(1,"months").format("YYYY-MM");this.listLoading=!1},edit:function(a){var t={number:a.number,depDate:i(a.depDate).format("YYYY-MM")};this.$emit("editChildEvent",t)}},mounted:function(){}},c=p,s=e("2877"),y=Object(s["a"])(c,l,o,!1,null,null,null);t["a"]=y.exports},e72f:function(a,t,e){"use strict";e.r(t);var l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("DeadlineGroup",{ref:"child",on:{editChildEvent:a.edit}})},o=[],n=(e("17e1"),e("2a70"),e("c1df")),r=e("8d50"),i={components:{DeadlineGroup:r["a"]},data:function(){return{}},created:function(){},methods:{edit:function(a){console.log(a);var t=this.$router.resolve({path:"/group/edit",query:{number:a.number,depDate:n(a.depDate).format("YYYY-MM")}});window.open(t.href,"_blank")}},mounted:function(){}},d=i,p=e("2877"),c=Object(p["a"])(d,l,o,!1,null,null,null);t["default"]=c.exports},ed08:function(a,t,e){"use strict";e("53ca"),e("ac1f"),e("00b4"),e("5319"),e("4d63"),e("2c3e"),e("25f0"),e("d3b7"),e("4d90"),e("1276"),e("159b")}}]);