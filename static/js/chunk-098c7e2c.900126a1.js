(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-098c7e2c"],{"0845":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CompanySearchFitAE",{ref:"child",on:{editChildEvent:t.edit}})},n=[],o=a("17e1"),r=(a("2a70"),a("c1df")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("CompanySearchOption",{ref:"child",on:{searchChildEvent:t.search}}),a("div",{staticClass:"el-col-24"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"show-summary":"","summary-method":t.getSummaries,data:t.itemData,"row-class-name":t.tableRowClassName,"empty-text":"沒有資料"}},[a("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),a("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(t,e){return t.number-e.number}}}),a("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(t,e){return t.depDate.localeCompare(e.depDate)}}}),a("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(t,e){return t.endDate.localeCompare(e.endDate)}}}),a("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(t,e){return t.name.localeCompare(e.name)}}}),a("el-table-column",{attrs:{prop:"people",label:"代表人",sortable:"","sort-method":function(t,e){return t.people.localeCompare(e.people)}}}),a("el-table-column",{attrs:{prop:"amount",label:"人數",sortable:"","sort-method":function(t,e){return t.amount.localeCompare(e.amount)}}}),a("el-table-column",{attrs:{prop:"payDetailCompany",label:"廠商"}}),a("el-table-column",{attrs:{prop:"item",label:"品項",sortable:"","sort-method":function(t,e){return t.phone-e.phone}}}),a("el-table-column",{attrs:{prop:"pay",label:"支出",width:"110%"}}),a("el-table-column",{attrs:{prop:"payDate",label:"付款日期",width:"120%",sortable:"","sort-method":function(t,e){return t.payDate.localeCompare(e.payDate)}}}),a("el-table-column",{attrs:{prop:"dl1",label:"第一筆DL",width:"120%"}}),a("el-table-column",{attrs:{prop:"dlpay1",label:"第一筆金額",width:"120%"}}),a("el-table-column",{attrs:{prop:"dl2",label:"第二筆DL",width:"120%"}}),a("el-table-column",{attrs:{prop:"dlpay2",label:"第二筆金額",width:"120%"}}),a("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("編輯")])]}}])})],1)],1)],1)},p=[],c=a("5530"),d=(a("d3b7"),a("159b"),a("d81d"),a("a434"),a("d925")),s={components:{CompanySearchOption:d["a"]},data:function(){return{listLoading:!1,itemData:[],company:"",payTotal:0}},created:function(){},methods:{getSummaries:function(t){var e=t.columns,a=t.data,l=[];return e.forEach((function(t,e){if(0!==e)if("支出"==t.label||"第一筆金額"==t.label||"第二筆金額"==t.label||"人數"==t.label){var n=a.map((function(e){return parseInt(e[t.property])}));n.every((function(t){return isNaN(t)}))||(l[e]=n.reduce((function(t,e){var a=parseInt(e);return isNaN(a)?t:t+e}),0))}else l[e]="";else l[e]="總共"})),l},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===1?"color-row":""},search:function(){var t,e=this;this.listLoading=!0;var a="2021-11";this.itemData.splice(0,this.itemData.length);for(var l=0;l<5;l++)t=o["a"].collection(a),t.where("payDetailCompany","array-contains-any",["立榮","華信","易飛網","長汎"]).get().then((function(t){t.forEach((function(t){for(var a=0;a<t.data().payDetailCompany.length;a++)"立榮"!=t.data().payDetailCompany[a]&&"華信"!=t.data().payDetailCompany[a]&&"易飛網"!=t.data().payDetailCompany[a]&&"長汎"!=t.data().payDetailCompany[a]||"馬祖"==t.data().location||e.itemData.push(Object(c["a"])(Object(c["a"])({},t.data()),{},{payDetailCompany:t.data().payDetailCompany[a],item:t.data().payDetailItem[a],pay:t.data().payDetailPay[a],payDate:t.data().payDetailPayDate[a],dl1:t.data().payDetailDl1[a],dlpay1:t.data().payDetailDlPay1[a],dl2:t.data().payDetailDl2[a],dlpay2:t.data().payDetailDlPay2[a]}))}))})),console.log(l),console.log(a),a=r(a).add(1,"months").format("YYYY-MM");this.listLoading=!1},edit:function(t){var e={number:t.number,depDate:r(t.depDate).format("YYYY-MM")};this.$emit("editChildEvent",e)}},mounted:function(){}},u=s,m=a("2877"),h=Object(m["a"])(u,i,p,!1,null,null,null),b=h.exports,f={components:{CompanySearchFitAE:b},data:function(){return{}},created:function(){},methods:{edit:function(t){console.log(t);var e=this.$router.resolve({path:"/admin/edit/fit",query:{number:t.number,depDate:r(t.depDate).format("YYYY-MM")}});window.open(e.href,"_blank")}},mounted:function(){}},y=f,D=Object(m["a"])(y,l,n,!1,null,null,null);e["default"]=D.exports},"2a70":function(t,e,a){},a434:function(t,e,a){"use strict";var l=a("23e7"),n=a("23cb"),o=a("a691"),r=a("50c4"),i=a("7b0b"),p=a("65f0"),c=a("8418"),d=a("1dde"),s=a("ae40"),u=d("splice"),m=s("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,b=Math.min,f=9007199254740991,y="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!u||!m},{splice:function(t,e){var a,l,d,s,u,m,D=i(this),w=r(D.length),C=n(t,w),v=arguments.length;if(0===v?a=l=0:1===v?(a=0,l=w-C):(a=v-2,l=b(h(o(e),0),w-C)),w+a-l>f)throw TypeError(y);for(d=p(D,l),s=0;s<l;s++)u=C+s,u in D&&c(d,s,D[u]);if(d.length=l,a<l){for(s=C;s<w-l;s++)u=s+l,m=s+a,u in D?D[m]=D[u]:delete D[m];for(s=w;s>w-l+a;s--)delete D[s-1]}else if(a>l)for(s=w-l;s>C;s--)u=s+l-1,m=s+a-1,u in D?D[m]=D[u]:delete D[m];for(s=0;s<a;s++)D[s+C]=arguments[s+2];return D.length=w-l+a,d}})}}]);