(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26b9fc1f"],{"2a70":function(e,t,l){},d151:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"選擇收入日期","value-format":"yyyy-MM-dd"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),l("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜尋")]),l("el-row"),l("div",{staticClass:"el-col-24"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.itemData,"default-sort":{prop:"number",order:"ascending"},"row-class-name":e.tableRowClassName,"empty-text":"沒有資料"}},[l("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),l("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(e,t){return e.number.localeCompare(t.number)}}}),l("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),l("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(e,t){return e.depDate.localeCompare(t.depDate)}}}),l("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(e,t){return e.endDate.localeCompare(t.endDate)}}}),l("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(e,t){return e.name.localeCompare(t.name)}}}),l("el-table-column",{attrs:{prop:"people",label:"代表人",sortable:"","sort-method":function(e,t){return e.people.localeCompare(t.people)}}}),l("el-table-column",{attrs:{prop:"item",label:"品項"}}),l("el-table-column",{attrs:{prop:"income",label:"收入",width:"90%",sortable:"","sort-method":function(e,t){return e.phone-t.phone}}}),l("el-table-column",{attrs:{prop:"incomeType",label:"收款方式",width:"100%"}}),l("el-table-column",{attrs:{prop:"opCheck",formatter:e.OpCheck,label:"OP核實",width:"100%"}}),l("el-table-column",{attrs:{prop:"adminCheck",label:"財務核實",formatter:e.AdminCheck,width:"100%"}}),l("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.edit(t.row)}}},[e._v("編輯")])]}}])}),l("el-table-column",{attrs:{prop:"dl2",label:"客服簽名",width:"100%"}})],1),l("el-row")],1),l("div",{staticClass:"el-col-24"},[l("el-row"),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("匯款："+e._s(e.transfer))]),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("現金："+e._s(e.cash))]),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("刷卡："+e._s(e.card))]),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("支票："+e._s(e.check))]),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("其他："+e._s(e.other))]),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("三倍券："+e._s(e.coupon))]),l("el-col",{staticClass:"el-col-xl-3 el-col-lg-3 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("LINEPAY："+e._s(e.linepay))]),l("el-col",{staticClass:"el-col-xl-4 el-col-lg-4 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("OP核實：")]),l("el-col",{staticClass:"el-col-xl-4 el-col-lg-4 el-col-md-8 el-col-sm-8 el-col-xs-12",staticStyle:{"font-size":"15px","font-family":"Microsoft JhengHei","font-weight":"bold","padding-right":"30px"}},[e._v("主管核實：")])],1)],1)},o=[],c=l("5530"),i=(l("a434"),l("d3b7"),l("159b"),l("17e1")),n=(l("2a70"),l("c1df")),s=(l("ed08"),{components:{},data:function(){return{listLoading:!1,itemData:[],itemDataCancel:[],date:"",transfer:0,cash:0,card:0,check:0,other:0,coupon:0,linepay:0}},created:function(){},methods:{OpCheck:function(e,t){return e.opCheck?"✔️":"❌"},AdminCheck:function(e,t){return e.adminCheck?"✔️":"❌"},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"color-row":""},search:function(){var e,t=this;this.listLoading=!0;var l=n(this.date).subtract(12,"months").format("YYYY-MM");this.itemData.splice(0,this.itemData.length),this.transfer=0,this.card=0,this.cash=0,this.check=0,this.other=0,this.coupon=0,this.linepay=0;for(var a=0;a<24;a++)e=i["a"].collection(l),console.log(l),e.where("incomeDetailDate","array-contains",this.date).get().then((function(e){e.forEach((function(e){for(var l=0;l<e.data().incomeDetailDate.length;l++)e.data().incomeDetailDate[l]==t.date&&(t.itemData.push(Object(c["a"])(Object(c["a"])({},e.data()),{},{item:e.data().incomeDetailItem[l],income:e.data().incomeDetailIncome[l],incomeType:e.data().incomeDetailType[l],opCheck:e.data().incomeDetailOpCheck[l],adminCheck:e.data().incomeDetailAdminCheck[l]})),"匯款"==e.data().incomeDetailType[l]?t.transfer=t.transfer+parseInt(e.data().incomeDetailIncome[l]):"刷卡"==e.data().incomeDetailType[l]?t.card=t.card+parseInt(e.data().incomeDetailIncome[l]):"現金"==e.data().incomeDetailType[l]?t.cash=t.cash+parseInt(e.data().incomeDetailIncome[l]):"支票"==e.data().incomeDetailType[l]?t.check=t.check+parseInt(e.data().incomeDetailIncome[l]):"其他"==e.data().incomeDetailType[l]?t.other=t.other+parseInt(e.data().incomeDetailIncome[l]):"三倍券"==e.data().incomeDetailType[l]?t.coupon=t.coupon+parseInt(e.data().incomeDetailIncome[l]):"LINEPAY"==e.data().incomeDetailType[l]&&(t.linepay=t.transfer+parseInt(e.data().incomeDetailIncome[l])))}))})),l=n(l).add(1,"months").format("YYYY-MM");this.listLoading=!1},edit:function(e){console.log(e);var t=this.$router.resolve({path:"/op/edit",query:{number:e.number,depDate:n(e.depDate).format("YYYY-MM-DD")}});window.open(t.href,"_blank")}},mounted:function(){}}),r=s,d=l("2877"),p=Object(d["a"])(r,a,o,!1,null,null,null);t["default"]=p.exports},ed08:function(e,t,l){"use strict";l("53ca"),l("ac1f"),l("00b4"),l("5319"),l("4d63"),l("2c3e"),l("25f0"),l("d3b7"),l("4d90"),l("1276"),l("159b")}}]);