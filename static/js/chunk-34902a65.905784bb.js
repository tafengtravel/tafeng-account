(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34902a65"],{"25f0":function(t,a,e){"use strict";var o=e("6eeb"),l=e("825a"),r=e("d039"),n=e("ad6d"),s="toString",i=RegExp.prototype,c=i[s],p=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=s;(p||u)&&o(RegExp.prototype,s,(function(){var t=l(this),a=String(t.source),e=t.flags,o=String(void 0===e&&t instanceof RegExp&&!("flags"in i)?n.call(t):e);return"/"+a+"/"+o}),{unsafe:!0})},"2a70":function(t,a,e){},a434:function(t,a,e){"use strict";var o=e("23e7"),l=e("23cb"),r=e("a691"),n=e("50c4"),s=e("7b0b"),i=e("65f0"),c=e("8418"),p=e("1dde"),u=e("ae40"),d=p("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,a){var e,o,p,u,d,m,w=s(this),T=n(w.length),x=l(t,T),F=arguments.length;if(0===F?e=o=0:1===F?(e=0,o=T-x):(e=F-2,o=b(f(r(a),0),T-x)),T+e-o>h)throw TypeError(g);for(p=i(w,o),u=0;u<o;u++)d=x+u,d in w&&c(p,u,w[d]);if(p.length=o,e<o){for(u=x;u<T-o;u++)d=u+o,m=u+e,d in w?w[m]=w[d]:delete w[m];for(u=T;u>T-o+e;u--)delete w[u-1]}else if(e>o)for(u=T-o;u>x;u--)d=u+o-1,m=u+e-1,d in w?w[m]=w[d]:delete w[m];for(u=0;u<e;u++)w[u+x]=arguments[u+2];return w.length=T-o+e,p}})},f6e3:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("TableOption",{ref:"child",on:{searchChildEvent:t.search}}),e("el-row"),e("el-row",[e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("人數："+t._s(t.amountTotal))])],1),e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("營業額："+t._s(t.priceTotal))])],1),e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("利潤："+t._s(t.profitTotal))])],1),e("span",{staticClass:"font el-col-4 el-col-sm-12 el-col-xs-12 el-col-xl-4 el-col-lg-4"},[e("font",{attrs:{color:"black"}},[t._v("稅金："+t._s(t.taxTotal))])],1)]),e("div",{staticClass:"el-col-24"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"show-summary":"","summary-method":t.getSummaries,data:t.itemData.filter((function(a){return!t.$refs.child.name||a.name.toLowerCase().includes(t.$refs.child.name.toLowerCase())})),"default-sort":{prop:"number",order:"ascending"},"row-class-name":t.tableRowClassName,"empty-text":"沒有資料"}},[e("el-table-column",{attrs:{type:"index",label:"筆數",width:"75%",fixed:""}}),e("el-table-column",{attrs:{prop:"number",label:"團號",width:"140%",sortable:"","sort-method":function(t,a){return t.number.localeCompare(a.number)}}}),e("el-table-column",{attrs:{prop:"group",label:"團體",width:"90%",formatter:t.group,sortable:"","sort-method":function(t,a){return t.group-a.group}}}),e("el-table-column",{attrs:{prop:"cs",label:"客服",width:"75%"}}),e("el-table-column",{attrs:{prop:"depDate",label:"出發日期",width:"120%",sortable:"","sort-method":function(t,a){return t.depDate.localeCompare(a.depDate)}}}),e("el-table-column",{attrs:{prop:"endDate",label:"結束日期",width:"120%",sortable:"","sort-method":function(t,a){return t.endDate.localeCompare(a.endDate)}}}),e("el-table-column",{attrs:{prop:"name",label:"團名",sortable:"","sort-method":function(t,a){return t.name.localeCompare(a.name)}}}),e("el-table-column",{attrs:{prop:"company",label:"公司名稱",sortable:"","sort-method":function(t,a){return t.company.localeCompare(a.company)}}}),e("el-table-column",{attrs:{prop:"people",label:"代表人",width:"175%",sortable:"","sort-method":function(t,a){return t.people.localeCompare(a.people)}}}),e("el-table-column",{attrs:{prop:"amount",label:"人數",width:"90%",sortable:"","sort-method":function(t,a){return t.amount.localeCompare(a.amount)}}}),e("el-table-column",{attrs:{prop:"phone",label:"聯絡電話",width:"125%",sortable:"","sort-method":function(t,a){return t.phone-a.phone}}}),e("el-table-column",{attrs:{prop:"profit",label:"利潤",width:"100%",sortable:"","sort-method":function(t,a){return t.profit-a.profit}}}),e("el-table-column",{attrs:{prop:"other",label:"備註",sortable:"","sort-method":function(t,a){return t.other.localeCompare(a.other)}}}),e("el-table-column",{attrs:{prop:"",label:"編輯",width:"60%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.edit(a.row)}}},[t._v("編輯")])]}}])})],1)],1)],1)},l=[],r=e("5530"),n=(e("d3b7"),e("159b"),e("d81d"),e("25f0"),e("a434"),e("17e1")),s=(e("2a70"),e("c1df"),e("5a943")),i={components:{TableOption:s["a"]},data:function(){return{listLoading:!1,itemData:[],month:"",amountTotal:"",profitTotal:"",priceTotal:"",taxTotal:""}},created:function(){},methods:{getSummaries:function(t){var a=t.columns,e=t.data,o=[];return a.forEach((function(t,a){if(0!==a)if("人數"==t.label||"利潤"==t.label){var l=e.map((function(a){return parseInt(a[t.property])}));l.every((function(t){return isNaN(t)}))||(o[a]=l.reduce((function(t,a){var e=parseInt(a);return isNaN(e)?t:t+a}),0))}else o[a]="";else o[a]="總共"})),o},insurance:function(t,a){return t.insurance1?"✔️":"❌"},group:function(t,a){return t.tax>0?"✔️":""},tableRowClassName:function(t){t.row;var a=t.rowIndex;return a%2===1?"color-row":""},search:function(t){var a=this;this.listLoading=!0;var e=n["a"].collection(t.month.toString()+"G"),o=0;"all"==t.cs?e.onSnapshot((function(t){a.itemData.splice(0,a.itemData.length),a.amountTotal=0,a.profitTotal=0,a.priceTotal=0,a.taxTotal=0,t.forEach((function(t){o=parseFloat(t.data().price)-parseFloat(t.data().income),a.itemData.push(Object(r["a"])(Object(r["a"])({},t.data()),{},{priceInsufficient:o})),isNaN(parseFloat(t.data().amount))||(a.amountTotal=parseFloat(a.amountTotal)+parseFloat(t.data().amount)),isNaN(parseFloat(t.data().price))||(a.priceTotal=parseFloat(a.priceTotal)+parseFloat(t.data().price)),isNaN(parseFloat(t.data().profit))||(a.profitTotal=parseFloat(a.profitTotal)+parseFloat(t.data().profit)),isNaN(parseFloat(t.data().tax))||(a.taxTotal=parseFloat(a.taxTotal)+parseFloat(t.data().tax))})),a.listLoading=!1})):e.where("cs","==",t.cs).onSnapshot((function(t){a.itemData.splice(0,a.itemData.length),a.amountTotal=0,a.profitTotal=0,a.priceTotal=0,a.taxTotal=0,t.forEach((function(t){o=parseFloat(t.data().price)-parseFloat(t.data().income),a.itemData.push(Object(r["a"])(Object(r["a"])({},t.data()),{},{priceInsufficient:o})),isNaN(parseFloat(t.data().amount))||(a.amountTotal=parseFloat(a.amountTotal)+parseFloat(t.data().amount)),isNaN(parseFloat(t.data().price))||(a.priceTotal=parseFloat(a.priceTotal)+parseFloat(t.data().price)),isNaN(parseFloat(t.data().profit))||(a.profitTotal=parseFloat(a.profitTotal)+parseFloat(t.data().profit)),isNaN(parseFloat(t.data().tax))||(a.taxTotal=parseFloat(a.taxTotal)+parseFloat(t.data().tax))})),a.listLoading=!1}))},edit:function(t){console.log(t);var a=this.$router.resolve({path:"/admin/edit/group",query:{number:t.number,depDate:this.$refs.child.month}});window.open(a.href,"_blank")}},mounted:function(){}},c=i,p=e("2877"),u=Object(p["a"])(c,o,l,!1,null,null,null);a["default"]=u.exports}}]);